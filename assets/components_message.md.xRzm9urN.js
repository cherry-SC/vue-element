import{p as P,au as z,z as O,a3 as R,k as A,d as C,o as m,b as _,w as f,a9 as L,j as s,Q as $,n as Z,J as y,r as J,e as F,c as D,a4 as j,aa as H,T as Q,h,y as u,a6 as U,av as B,aw as G,I as M,as as w,a as l}from"./chunks/framework.CJE4M6uz.js";import{_ as I,a as K}from"./chunks/theme.DcKnRW0l.js";function W(t,i,e){P(()=>{z(t)?O(t,(a,n)=>{n?.removeEventListener(i,e),a?.addEventListener(i,e)}):t.addEventListener(i,e)}),R(()=>{A(t)?.removeEventListener(i,e)})}const X={class:"sc-message__content"},Y={key:0,class:"sc-message__close"},ss=C({name:"ScMessage"}),es=C({...ss,props:{message:{},type:{default:"info"},duration:{default:3e3},showClose:{type:Boolean},onDestroy:{},id:{},zIndex:{},offset:{default:20},transitionName:{default:"fade-up"}},setup(t,{expose:i}){const e=t,a=h(()=>{switch(e.type){case"success":return"circle-check";case"warning":return"triangle-exclamation";case"danger":return"circle-xmark";case"primary":return"circle-info";default:return"circle-info"}}),n=u(!1),r=u(),p=u(0),k=h(()=>ns(e.id)),g=h(()=>k.value+e.offset),E=h(()=>g.value+p.value),o=h(()=>({top:g.value+"px",zIndex:e.zIndex}));let d=null;function x(){e.duration!==0&&(d=setTimeout(()=>{n.value=!1},e.duration))}function S(){clearTimeout(d)}P(async()=>{n.value=!0,x()});function N(v){v.code==="Escape"&&(n.value=!1)}W(document,"keydown",N);function V(){e.onDestroy()}function q(){p.value=r.value.getBoundingClientRect().height}return i({bottomOffset:E,visible:n}),(v,b)=>(m(),_(Q,{name:t.transitionName,onAfterLeave:V,onEnter:q},{default:f(()=>[L(s("div",{class:Z(["sc-message",{[`sc-message--${t.type}`]:t.type,"is-close":t.showClose}]),role:"alert",ref_key:"messageRef",ref:r,style:$(o.value),onMouseenter:S,onMouseleave:x},[s("div",X,[y(I,{class:"sc-message__icon",icon:a.value},null,8,["icon"]),J(v.$slots,"default",{},()=>[t.message?(m(),_(A(K),{key:0,vNode:t.message},null,8,["vNode"])):F("",!0)])]),t.showClose?(m(),D("div",Y,[y(I,{icon:"xmark",onClick:b[0]||(b[0]=j(os=>n.value=!1,["stop"]))})])):F("",!0)],38),[[H,n.value]])]),_:3},8,["name"]))}}),T=u(0),ts=(t=2e3)=>{const i=u(t),e=h(()=>i.value+T.value);return{currentZIndex:e,nextZIndex:()=>(T.value++,e.value),initialZIndex:i}};let as=1;const c=G([]),is=t=>{const{nextZIndex:i}=ts(),e=`message_${as++}`,a=document.createElement("div"),n=()=>{const o=c.findIndex(d=>d.id===e);o!==-1&&(c.splice(o,1),B(null,a))},r=()=>{const o=c.find(d=>d.id===e);o&&(o.vm.exposed.visible.value=!1)},p={...t,id:e,zIndex:i(),onDestroy:n},k=U(es,p);B(k,a),document.body.appendChild(a.firstElementChild);const g=k.component,E={id:e,vnode:k,vm:g,props:p,destory:r};return c.push(E),E},ns=t=>{const i=c.findIndex(e=>e.id===t);return i<=0?0:c[i-1]?.vm.exposed.bottomOffset.value},hs=JSON.parse('{"title":"Message | V-Element","description":"Message 组件文档","frontmatter":{"title":"Message | V-Element","description":"Message 组件文档","outline":"deep"},"headers":[],"relativePath":"components/message.md","filePath":"components/message.md"}'),ls={name:"components/message.md"},cs=C({...ls,setup(t){const i=()=>{is({message:"hello message",type:"success",showClose:!0,duration:3e3})};return(e,a)=>{const n=M("ScButton"),r=M("DemoBlock");return m(),D("div",null,[a[2]||(a[2]=w('<h1 id="message-消息提示" tabindex="-1">Message 消息提示 <a class="header-anchor" href="#message-消息提示" aria-label="Permalink to “Message 消息提示”">​</a></h1><p>用于全局展示操作反馈信息（以方法方式调用）。</p><p>Message 更适合“操作完成后的轻反馈”，它会浮在页面之上并自动消失；如果需要在页面中长期提示用户注意事项，更推荐使用 Alert。</p><h2 id="使用场景" tabindex="-1">使用场景 <a class="header-anchor" href="#使用场景" aria-label="Permalink to “使用场景”">​</a></h2><ul><li>保存成功 / 删除成功等操作反馈</li><li>网络错误、权限不足等即时提示</li><li>需要在不改变布局的情况下通知用户</li></ul><h2 id="基础用法" tabindex="-1">基础用法 <a class="header-anchor" href="#基础用法" aria-label="Permalink to “基础用法”">​</a></h2><p>调用 <code>createMessage(options)</code> 即可显示一条消息。</p>',7)),y(r,{title:"基础用法"},{demo:f(()=>[y(n,{type:"primary",onClick:i},{default:f(()=>[...a[0]||(a[0]=[l("打开 Message",-1)])]),_:1})]),source:f(()=>[...a[1]||(a[1]=[s("div",{class:"language-ts"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { createMessage } "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '@/components/Message/method'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"createMessage"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  message: "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'hello message'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  type: "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'success'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  showClose: "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  duration: "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3000"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")])])])],-1)])]),_:1}),a[3]||(a[3]=w(`<h2 id="进阶用法" tabindex="-1">进阶用法 <a class="header-anchor" href="#进阶用法" aria-label="Permalink to “进阶用法”">​</a></h2><h3 id="手动关闭与常驻" tabindex="-1">手动关闭与常驻 <a class="header-anchor" href="#手动关闭与常驻" aria-label="Permalink to “手动关闭与常驻”">​</a></h3><p>将 <code>duration</code> 设为 <code>0</code> 表示不自动关闭（需要用户点击关闭按钮，或通过返回的实例方法手动关闭）。</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createMessage } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/components/Message/method&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> instance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;这条消息不会自动关闭&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;info&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  showClose: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  duration: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h2 id="message-api" tabindex="-1">Message API <a class="header-anchor" href="#message-api" aria-label="Permalink to “Message API”">​</a></h2><h3 id="message-options" tabindex="-1">Message Options <a class="header-anchor" href="#message-options" aria-label="Permalink to “Message Options”">​</a></h3><table tabindex="0"><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>message</td><td>string | VNode</td><td>-</td><td>内容</td></tr><tr><td>type</td><td>&quot;success&quot; | &quot;danger&quot; | &quot;warning&quot; | &quot;info&quot; | &quot;primary&quot;</td><td>&quot;info&quot;</td><td>类型</td></tr><tr><td>duration</td><td>number</td><td>3000</td><td>自动关闭时间（ms），为 0 时不自动关闭</td></tr><tr><td>showClose</td><td>boolean</td><td>false</td><td>是否显示关闭按钮</td></tr></tbody></table><h3 id="返回值" tabindex="-1">返回值 <a class="header-anchor" href="#返回值" aria-label="Permalink to “返回值”">​</a></h3><p><code>createMessage</code> 会返回一个实例对象，用于手动关闭：</p><table tabindex="0"><thead><tr><th>名称</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>destory</td><td>() =&gt; void</td><td>关闭当前消息（拼写与代码保持一致）</td></tr></tbody></table>`,10))])}}});export{hs as __pageData,cs as default};
